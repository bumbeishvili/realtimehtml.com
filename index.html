<!DOCTYPE html>
<html lang="en">
<head>
<title>Real-time HTML Editor - Live HTML, CSS, JavaScript Code Editor</title>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Free online real-time HTML editor with instant live preview. Write and test HTML, CSS, and JavaScript code in real-time. Perfect for web developers, students, and quick prototyping.">
<meta name="author" content="realtimehtml.com">
<meta name="keywords" content="HTML editor, live preview, real-time editor, code editor, web development, HTML, CSS, JavaScript, online editor, free editor, coding tool">
<meta name="robots" content="index, follow">
<meta name="googlebot" content="index, follow">
<meta name="google" content="nositelinkssearchbox">
<meta name="google" content="notranslate">

<!-- Canonical URL -->
<link rel="canonical" href="https://realtimehtml.com">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://realtimehtml.com">
<meta property="og:title" content="Real-time HTML Editor - Live Code Preview">
<meta property="og:description" content="Free online real-time HTML editor with instant live preview. Write and test HTML, CSS, and JavaScript code in real-time.">
<meta property="og:image" content="https://realtimehtml.com/preview.svg">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:image:alt" content="Real-time HTML Editor interface showing code editor and live preview">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://realtimehtml.com">
<meta property="twitter:title" content="Real-time HTML Editor - Live Code Preview">
<meta property="twitter:description" content="Free online real-time HTML editor with instant live preview. Write and test HTML, CSS, and JavaScript code in real-time.">
<meta property="twitter:image" content="https://realtimehtml.com/preview.svg">
<meta property="twitter:image:alt" content="Real-time HTML Editor interface showing code editor and live preview">

<!-- Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "Real-time HTML Editor",
  "url": "https://realtimehtml.com",
  "description": "Free online real-time HTML editor with instant live preview. Write and test HTML, CSS, and JavaScript code in real-time.",
  "applicationCategory": "DeveloperApplication",
  "operatingSystem": "Any",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "featureList": [
    "Real-time preview",
    "HTML, CSS, JavaScript support",
    "Code sharing",
    "Split view",
    "Mobile responsive"
  ]
}
</script>

<!-- Favicon -->
<link rel="icon" href="./vector.png">
<link rel="apple-touch-icon" href="./vector.png">

<!-- Preload critical resources -->
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css" as="style">
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js" as="script">

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async defer src="https://www.googletagmanager.com/gtag/js?id=G-7E9MWZLQHL"></script>

<!-- Add CodeMirror CSS and JavaScript -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/dracula.min.css">
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/xml/xml.min.js"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/css/css.min.js"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/htmlmixed/htmlmixed.min.js"></script>

<!-- Add Split.js -->
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/split.js/1.6.5/split.min.js"></script>

<style>
/* Base styles */
:root {
    --system-fonts: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
    --modal-bg: #2d2d2d;
    --modal-hover: #3d3d3d;
    --transition-default: all 0.2s ease;
}

/* Editor styles */
.CodeMirror {
    height: 100vh;
    font-size: 14px;
}

/* Split panel styles */
.split {
    display: flex;
    width: 100vw;
    height: 100vh;
}

.split-panel {
    overflow: hidden;
    height: 100vh;
}

#editor {
    min-width: 0;  /* Required for proper flex behavior */
}

/* Gutter styles */
.gutter {
    background-color: #333;
    background-repeat: no-repeat;
    background-position: 50%;
}

.gutter:hover {
    background-color: #444;
}

.gutter.gutter-horizontal {
    cursor: col-resize;
    width: 10px;
}

/* Share button styles */
#shareButton {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 10000;
    width: 40px;
    height: 40px;
    background-color: var(--modal-bg);
    color: white;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: var(--transition-default);
}

#shareButton:hover {
    background-color: var(--modal-hover);
    box-shadow: 0 3px 7px rgba(0,0,0,0.3);
    transform: translateX(-50%) scale(1.05);
}

#shareButton:active {
    transform: translateX(-50%) scale(0.95);
}

/* Modal styles */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 10001;
    opacity: 0;
    transition: var(--transition-default);
    font-family: var(--system-fonts);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

.modal.show {
    display: flex;
    opacity: 1;
}

.modal-content {
    position: relative;
    background: var(--modal-bg);
    margin: auto;
    padding: 25px;
    border-radius: 8px;
    width: 90%;
    max-width: 500px;
    color: #fff;
    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
}

.modal-content h2 {
    font-family: var(--system-fonts);
    font-weight: 600;
    font-size: 20px;
    letter-spacing: -0.01em;
    margin-top: 0;
}

.modal-close {
    position: absolute;
    top: 15px;
    right: 15px;
    background: none;
    border: none;
    color: #999;
    cursor: pointer;
    padding: 5px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: var(--transition-default);
}

.modal-close:hover {
    background: rgba(255,255,255,0.1);
    color: #fff;
}

/* Share options */
.share-option {
    background: #363636;
    padding: 20px;
    margin: 15px 0;
    border-radius: 6px;
    transition: var(--transition-default);
}

.share-option:hover {
    background: #404040;
}

.share-option h3 {
    margin: 0 0 10px 0;
    font-size: 16px;
    color: #fff;
    font-weight: 500;
}

.share-option p {
    margin: 0 0 15px 0;
    color: #bbb;
    font-size: 14px;
    line-height: 1.5;
    font-weight: 400;
}

.share-button {
    font-family: var(--system-fonts);
    font-weight: 500;
    background: #4a4a4a;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    transition: var(--transition-default);
}

.share-button:hover {
    background: #555;
}
</style>

<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-7E9MWZLQHL');
</script>

<script type="text/javascript">
const defaultStuff = `<html>
 <head></head>
<body>

    <div id="message"></div>

    <script\> 
       document.getElementById('message').innerHTML = 'Edit code left, see the result right';
    <\/script>

</body>
<html>`;
const STORAGE_KEY = 'realtimehtml_code';
let editor;
let previousContent = '';

// Local Storage functions
const storage = {
    save(content) {
        try {
            // If content is empty, save the default content instead
            const contentToSave = content || defaultStuff;
            localStorage.setItem(STORAGE_KEY, contentToSave);
            return true;
        } catch (error) {
            console.error('Error saving to localStorage:', error);
            // Try clearing some space in localStorage if it's full
            try {
                // Remove old items if storage is full
                for (let i = 0; i < localStorage.length; i++) {
                    const key = localStorage.key(i);
                    if (key !== STORAGE_KEY) {
                        localStorage.removeItem(key);
                    }
                }
                // Try saving again
                localStorage.setItem(STORAGE_KEY, contentToSave);
                return true;
            } catch (retryError) {
                console.error('Failed to save even after cleanup:', retryError);
                return false;
            }
        }
    },
    
    load() {
        try {
            return localStorage.getItem(STORAGE_KEY) || defaultStuff;
        } catch (error) {
            console.error('Error loading from localStorage:', error);
            return defaultStuff;
        }
    }
};

// Modal functions
const modal = {
    show() {
        document.getElementById('shareModal').classList.add('show');
    },
    
    hide() {
        document.getElementById('shareModal').classList.remove('show');
    }
};

// Gist loading function
async function loadGistContent(url) {
    try {
        const response = await fetch(url);
        if (!response.ok) throw new Error('Failed to fetch Gist');
        return await response.text();
    } catch (error) {
        console.error('Error loading gist:', error);
        return null;
    }
}

// Clipboard functions
const clipboard = {
    async copy(text) {
        if (navigator.clipboard && window.isSecureContext) {
            return navigator.clipboard.writeText(text);
        }
        
        // Fallback for browsers without clipboard API
        const textarea = document.createElement('textarea');
        textarea.value = text;
        textarea.style.position = 'fixed';
        textarea.style.opacity = '0';
        document.body.appendChild(textarea);
        textarea.select();
        
        try {
            document.execCommand('copy');
            return Promise.resolve();
        } catch (err) {
            console.error('Failed to copy URL:', err);
            return Promise.reject(err);
        } finally {
            document.body.removeChild(textarea);
        }
    }
};

// Share functionality
async function shareCode() {
    const content = editor.getValue();
    try {
        const encoded = btoa(unescape(encodeURIComponent(content)));
        const shareUrl = `${window.location.origin}#code=${encoded}`;
        
        await clipboard.copy(shareUrl);
        const button = document.getElementById('compressedButton');
        button.textContent = 'Copied!';
        
        setTimeout(() => {
            button.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" fill="currentColor"/></svg>Copy compressed URL';
        }, 2000);
    } catch (error) {
        console.error('Error sharing code:', error);
        alert('Could not automatically copy the URL. Here it is to copy manually:\n\n' + shareUrl);
    }
}

// Debounce function
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

// Preview update function
const debouncedPreviewUpdate = debounce(() => {
    const newContent = editor.getValue();
    if (previousContent === newContent) return;
    
    previousContent = newContent;
    const rightPanel = document.querySelector('#right-panel');
    const iframe = document.querySelector('#preview') || document.createElement('iframe');
    
    if (!iframe.id) {
        iframe.id = 'preview';
        iframe.style.cssText = 'width: 100%; height: 100%; border: none;';
        iframe.setAttribute('sandbox', 'allow-scripts allow-same-origin allow-modals allow-forms allow-popups');
        rightPanel.appendChild(iframe);
    }
    
    // Process the content to add loop protection
    const processedContent = newContent.replace(/\b(for|while)\b\s*\(/g, (match, keyword, offset) => {
        const lineNumber = newContent.substr(0, offset).split('\n').length;
        return `${match}loopProtect(${lineNumber}),`;
    });

    // Create the protected HTML content
    const html = [
        '<!DOCTYPE html>',
        '<html>',
        '<head>',
        '    <meta charset="utf-8">',
        '    <script>',
        '        // Loop protection',
        '        window.__loopProtect = true;',
        '        window.__loopProtectTimeout = 500;',
        '        let __loopCount = {};',
        '',
        '        // Override setTimeout and setInterval',
        '        const originalSetTimeout = setTimeout;',
        '        const originalSetInterval = setInterval;',
        '',
        '        window.setTimeout = function(fn, delay) {',
        '            if (delay < 10) delay = 10;',
        '            return originalSetTimeout.call(this, fn, delay);',
        '        };',
        '',
        '        window.setInterval = function(fn, delay) {',
        '            if (delay < 10) delay = 10;',
        '            return originalSetInterval.call(this, fn, delay);',
        '        };',
        '',
        '        function loopProtect(line) {',
        '            if (!window.__loopProtect) return;',
        '            const key = "loop" + line;',
        '            __loopCount[key] = (__loopCount[key] || 0) + 1;',
        '',
        '            if (__loopCount[key] > 1000000) {',
        '                const msg = "Potential infinite loop detected on line " + line;',
        '                console.error(msg);',
        '                document.body.innerHTML = \'<div style="color: red; font-family: monospace; padding: 20px;">\' + msg + "</div>";',
        '                throw new Error(msg);',
        '            }',
        '',
        '            if (__loopCount[key] === 1) {',
        '                setTimeout(() => { __loopCount[key] = 0; }, window.__loopProtectTimeout);',
        '            }',
        '            return true;',
        '        }',
        '    <\/script>',
        '</head>',
        '<body>',
        processedContent,
        '</body>',
        '</html>'
    ].join('\n');
    
    iframe.srcdoc = html;
}, 150);

// Initialize editor
async function init() {
    let initialContent = defaultStuff;
    const hash = window.location.hash;

    if (hash) {
        if (hash.startsWith('#code=')) {
            try {
                const encoded = hash.substring(6);
                const content = decodeURIComponent(escape(atob(encoded)));
                if (content) initialContent = content;
            } catch (error) {
                console.error('Error loading shared code:', error);
            }
        } else if (hash.startsWith('#@') || hash.startsWith('#http')) {
            const gistUrl = hash.startsWith('#@') ? hash.substring(2) : hash.substring(1);
            const content = await loadGistContent(gistUrl);
            if (content) initialContent = content;
        }
    } else {
        initialContent = storage.load();
    }

    editor = CodeMirror(document.querySelector('#editor'), {
        value: initialContent,
        mode: 'htmlmixed',
        theme: 'dracula',
        lineNumbers: true,
        autoCloseTags: true,
        autoCloseBrackets: true,
        matchBrackets: true,
        indentUnit: 2,
        tabSize: 2,
        lineWrapping: true,
        viewportMargin: Infinity,
        // Add performance options
        firstLineNumber: 1,
        workTime: 20,
        workDelay: 300,
    });

    // Add auto-save functionality
    editor.on('change', (cm) => {
        debouncedPreviewUpdate();
        // Save to localStorage
        const content = cm.getValue();
        storage.save(content);
    });
    
    editor.focus();
    editor.execCommand('selectAll');
    
    debouncedPreviewUpdate();
}
</script>
</head>
<body style="margin: 0; padding: 0; overflow: hidden;">
    <button id="shareButton" onclick="modal.show()" title="Share code">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z" fill="currentColor"/>
        </svg>
    </button>

    <!-- Share Modal -->
    <div id="shareModal" class="modal" onclick="if(event.target === this) modal.hide()">
        <div class="modal-content">
            <button class="modal-close" onclick="modal.hide()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" fill="currentColor"/>
                </svg>
            </button>
            <h2 style="margin-top: 0;">Share Your Code</h2>
            
            <div class="share-option">
                <h3>Option 1: Share via GitHub Gist (Recommended)</h3>
                <p>1. Create a new Gist at <a href="https://gist.github.com" target="_blank" style="color: #7cb7ff;">gist.github.com</a><br>
                   2. Copy your code and paste it there<br>
                   3. After saving, click "Raw" button<br>
                   4. Add your raw Gist URL to: <code style="background: #404040; padding: 2px 6px; border-radius: 4px;">realtimehtml.com#</code></p>
            </div>

            <div class="share-option">
                <h3>Option 2: Quick Share (URL Compressed)</h3>
                <p>Get an instantly shareable link with your code compressed into the URL.<br>
                   Note: This might not work for very large code files (more than 1200 lines). </p>
                <button id="compressedButton" class="share-button" onclick="shareCode()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" fill="currentColor"/>
                    </svg>
                    Copy compressed URL
                </button>
            </div>
        </div>
    </div>

    <div class="split">
        <div class="split-panel" id="left-panel">
            <div id="editor"></div>
        </div>
        <div class="gutter"></div>
        <div class="split-panel" id="right-panel">
            <iframe id="preview" sandbox="allow-scripts allow-same-origin allow-modals allow-forms allow-popups" style="width: 100%; height: 100%; border: none;"></iframe>
        </div>
    </div>
    <script>
        window.onload = function() {
            Split(['#left-panel', '#right-panel'], {
                sizes: [50, 50],
                minSize: [200, 200],
                gutterSize: 10,
                dragInterval: 1,
                snapOffset: 0,
                elementStyle: (dimension, size, gutterSize) => ({
                    'flex-basis': `calc(${size}% - ${gutterSize}px)`,
                }),
                gutterStyle: (dimension, gutterSize) => ({
                    'flex-basis': `${gutterSize}px`,
                }),
                onDrag: () => editor.refresh()
            });
            init();
        };
    </script>
</body>
</html>
