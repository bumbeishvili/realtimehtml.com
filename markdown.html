<!DOCTYPE html>
<html lang="en">
<head>
<title>Markdown Editor - Live Preview with Real-time Editing</title>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Free online Markdown editor with instant live preview. Write and preview Markdown in real-time. Perfect for writing documentation, README files, and blog posts.">
<meta name="author" content="realtimehtml.com">
<meta name="keywords" content="Markdown editor, live preview, real-time editor, code editor, web development, documentation, README, blog writing, online editor, free editor, GitHub Flavored Markdown, GFM">
<meta name="robots" content="index, follow">
<meta name="googlebot" content="index, follow">
<meta name="google" content="nositelinkssearchbox">
<meta name="google" content="notranslate">

<!-- Canonical URL -->
<link rel="canonical" href="https://realtimehtml.com/markdown">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://realtimehtml.com/markdown">
<meta property="og:title" content="Markdown Editor - Live Preview with Real-time Editing">
<meta property="og:description" content="Free online Markdown editor with instant live preview. Write and preview Markdown in real-time. Perfect for writing documentation, README files, and blog posts.">
<meta property="og:image" content="https://realtimehtml.com/preview.svg">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:image:alt" content="Real-time Markdown Editor interface showing editor and live preview">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://realtimehtml.com/markdown">
<meta property="twitter:title" content="Markdown Editor - Live Preview with Real-time Editing">
<meta property="twitter:description" content="Free online Markdown editor with instant live preview. Write and preview Markdown in real-time. Perfect for writing documentation, README files, and blog posts.">
<meta property="twitter:image" content="https://realtimehtml.com/preview.svg">
<meta property="twitter:image:alt" content="Real-time Markdown Editor interface showing editor and live preview">

<!-- Favicon -->
<link rel="icon" href="./vector.png">
<link rel="apple-touch-icon" href="./vector.png">

<!-- Preload critical resources -->
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css" as="style">
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js" as="script">

<!-- Add CodeMirror CSS and JavaScript -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/dracula.min.css">
<link rel="stylesheet" href="./scrollbar.css">
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/markdown/markdown.min.js"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/xml/xml.min.js"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/css/css.min.js"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/htmlmixed/htmlmixed.min.js"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/mode/overlay.min.js"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/gfm/gfm.min.js"></script>

<!-- Add Storage Utils -->
<script type="module" src="./utils.js"></script>

<!-- Add Stripe -->
<script src="https://js.stripe.com/v3/"></script>

<!-- Add Payment Integration -->
<script type="module" src="./payment.js"></script>

<!-- Add Split.js -->
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/split.js/1.6.5/split.min.js"></script>

<!-- Add Marked.js for Markdown parsing -->
<script defer src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

<!-- Add highlight.js for syntax highlighting -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github-dark.min.css">
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>

<!-- Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "Markdown Editor",
  "url": "https://realtimehtml.com/markdown",
  "description": "Free online Markdown editor with instant live preview. Write and preview Markdown in real-time. Perfect for writing documentation, README files, and blog posts.",
  "applicationCategory": "DeveloperApplication",
  "operatingSystem": "Any",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "featureList": [
    "Real-time Markdown preview",
    "GitHub Flavored Markdown support",
    "Syntax highlighting",
    "Split view editor",
    "Mobile responsive",
    "Code sharing",
    "Dark theme support",
    "Auto-save"
  ],
  "screenshot": "https://realtimehtml.com/markdown-preview.png",
  "softwareVersion": "3.0",
  "author": {
    "@type": "Organization",
    "name": "realtimehtml.com"
  },
  "keywords": "Markdown editor, live preview, documentation, README, blog writing, web development"
}
</script>

<style>
/* Base styles */
:root {
    --system-fonts: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
    --modal-bg: #2d2d2d;
    --modal-hover: #3d3d3d;
    --transition-default: all 0.2s ease;
}

/* Editor styles */
.CodeMirror {
    height: 100vh;
    font-size: 14px;
    font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
}

/* Split panel styles */
.split {
    display: flex;
    width: 100vw;
    height: 100vh;
}

.split-panel {
    overflow: hidden;
    height: 100vh;
}

#editor {
    min-width: 0;
}

/* Preview styles */
#preview {
    height: 100%;
    overflow-y: auto;
    padding: 20px;
    box-sizing: border-box;
    font-family: var(--system-fonts);
    line-height: 1.6;
    color: #24292e;
    background: #ffffff;
}

#preview h1, #preview h2, #preview h3, #preview h4, #preview h5, #preview h6 {
    margin-top: 24px;
    margin-bottom: 16px;
    font-weight: 600;
    line-height: 1.25;
    color: #24292e;
}

#preview h1 { font-size: 2em; }
#preview h2 { font-size: 1.5em; }
#preview h3 { font-size: 1.25em; }
#preview h4 { font-size: 1em; }
#preview h5 { font-size: 0.875em; }
#preview h6 { font-size: 0.85em; }

#preview p, #preview ul, #preview ol {
    margin-bottom: 16px;
}

#preview code {
    padding: 0.2em 0.4em;
    margin: 0;
    font-size: 85%;
    background-color: rgba(27, 31, 35, 0.05);
    border-radius: 3px;
    font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;
}

#preview pre code {
    padding: 16px;
    display: block;
    overflow-x: auto;
    line-height: 1.45;
    background-color: #f6f8fa;
    border-radius: 6px;
}

#preview a {
    color: #0366d6;
    text-decoration: none;
}

#preview a:hover {
    text-decoration: underline;
}

#preview blockquote {
    padding: 0 1em;
    color: #6a737d;
    border-left: 0.25em solid #dfe2e5;
    margin: 0 0 16px 0;
}

#preview img {
    max-width: 100%;
    height: auto;
}

#preview table {
    border-collapse: collapse;
    width: 100%;
    margin-bottom: 16px;
}

#preview table th,
#preview table td {
    padding: 6px 13px;
    border: 1px solid #dfe2e5;
}

#preview table tr {
    background-color: #ffffff;
    border-top: 1px solid #dfe2e5;
}

#preview table tr:nth-child(2n) {
    background-color: #f6f8fa;
}

/* Gutter styles */
.gutter {
    background-color: #333;
    background-repeat: no-repeat;
    background-position: 50%;
}

.gutter:hover {
    background-color: #444;
}

.gutter.gutter-horizontal {
    cursor: col-resize;
    width: 10px;
}

/* Share button styles */
#shareButton {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 10000;
    width: 40px;
    height: 40px;
    background-color: var(--modal-bg);
    color: white;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: var(--transition-default);
}

#shareButton:hover {
    background-color: var(--modal-hover);
    box-shadow: 0 3px 7px rgba(0,0,0,0.3);
    transform: translateX(-50%) scale(1.05);
}

#shareButton:active {
    transform: translateX(-50%) scale(0.95);
}

/* Modal styles */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 10001;
    opacity: 0;
    transition: var(--transition-default);
    font-family: var(--system-fonts);
}

.modal.show {
    display: flex;
    opacity: 1;
}

.modal-content {
    position: relative;
    background: var(--modal-bg);
    margin: auto;
    padding: 25px;
    border-radius: 8px;
    width: 90%;
    max-width: 500px;
    color: #fff;
    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
}

.modal-content h2 {
    font-family: var(--system-fonts);
    font-weight: 600;
    font-size: 20px;
    letter-spacing: -0.01em;
    margin-top: 0;
}

.modal-close {
    position: absolute;
    top: 15px;
    right: 15px;
    background: none;
    border: none;
    color: #999;
    cursor: pointer;
    padding: 5px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: var(--transition-default);
}

.modal-close:hover {
    background: rgba(255,255,255,0.1);
    color: #fff;
}

/* Share options */
.share-option {
    background: #363636;
    padding: 20px;
    margin: 15px 0;
    border-radius: 6px;
    transition: var(--transition-default);
}

.share-option:hover {
    background: #404040;
}

.share-option h3 {
    margin: 0 0 10px 0;
    font-size: 16px;
    color: #fff;
    font-weight: 500;
}

.share-option p {
    margin: 0 0 15px 0;
    color: #bbb;
    font-size: 14px;
    line-height: 1.5;
    font-weight: 400;
}

.share-button {
    font-family: var(--system-fonts);
    font-weight: 500;
    background: #4a4a4a;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    transition: var(--transition-default);
}

.share-button:hover {
    background: #555;
}
</style>

<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-7E9MWZLQHL');
</script>

<script type="module">
import { storage, STORAGE_KEYS, embed } from './utils.js';

// Modal functions
const modal = {
    show() {
        document.getElementById('shareModal').classList.add('show');
        // Update embed code preview
        document.getElementById('embedCode').textContent = embed.getCode(editor);
    },
    
    hide() {
        document.getElementById('shareModal').classList.remove('show');
    }
};

// Add copyEmbedCode function
async function copyEmbedCode() {
    const success = await embed.copyCode(editor);
    if (!success) {
        alert('Failed to copy embed code. Please try again.');
    }
}

// Make functions globally available
window.modal = modal;
window.shareCode = shareCode;
window.copyEmbedCode = copyEmbedCode;

const defaultStuff = `# Welcome to the Markdown Editor! ✨

## Features

- **Real-time Preview**: See your changes instantly
- **Syntax Highlighting**: For code blocks
- **GitHub Flavored Markdown**: Supporting tables, task lists, and more
- **Easy Sharing**: Share your markdown content with others

## Example Code Block

\`\`\`javascript
function greet(name) {
    console.log(\`Hello, \${name}!\`);
}
greet('World');
\`\`\`

## Task List

- [x] Create markdown editor
- [x] Add real-time preview
- [ ] Write documentation
- [ ] Share with friends

## Table Example

| Feature | Status |
|---------|--------|
| Editor | ✅ |
| Preview | ✅ |
| Sharing | ✅ |
| Dark Mode | ✅ |

> Start editing to see the magic happen! ✨
`;

let editor;
let previousContent = '';

// Initialize editor
async function init() {
    let initialContent = defaultStuff;
    const hash = window.location.hash;

    if (hash) {
        if (hash.startsWith('#code=')) {
            try {
                const encoded = hash.substring(6);
                const content = decodeURIComponent(escape(atob(encoded)));
                if (content) initialContent = content;
            } catch (error) {
                console.error('Error loading shared code:', error);
            }
        } else if (hash.startsWith('#')) {
            const gistUrl = hash.substring(1);
            const content = await loadGistContent(gistUrl);
            if (content) initialContent = content;
        }
    } else {
        initialContent = storage.load(STORAGE_KEYS.MARKDOWN_EDITOR, defaultStuff);
    }

    editor = CodeMirror(document.querySelector('#editor'), {
        value: initialContent,
        mode: 'markdown',
        theme: 'dracula',
        lineNumbers: true,
        lineWrapping: true,
        viewportMargin: Infinity,
        tabSize: 2,
        indentUnit: 2,
        autofocus: true,
        matchBrackets: true,
        autoCloseBrackets: true
    });

    // Add auto-save functionality
    editor.on('change', (cm) => {
        debouncedPreviewUpdate();
        // Save to localStorage
        const content = cm.getValue();
        storage.save(STORAGE_KEYS.MARKDOWN_EDITOR, content, defaultStuff);
    });
    
    editor.focus();
    editor.execCommand('selectAll');
    debouncedPreviewUpdate();
}

// Gist loading function
async function loadGistContent(url) {
    try {
        // Convert github.com URLs to raw content URLs
        if (url.includes('github.com/gist/') || url.includes('gist.github.com/')) {
            // If it's not already a raw URL, convert it
            if (!url.includes('raw.githubusercontent.com') && !url.includes('/raw/')) {
                // Handle both full and shortened URLs
                url = url.replace('gist.github.com/', 'gist.githubusercontent.com/')
                         .replace('github.com/gist/', 'gist.githubusercontent.com/')
                         .replace('/blob/', '/raw/');
                
                // If URL doesn't end with /raw, add it
                if (!url.endsWith('/raw')) {
                    url = url + '/raw';
                }
            }
        }

        const response = await fetch(url);
        if (!response.ok) throw new Error('Failed to fetch Gist');
        return await response.text();
    } catch (error) {
        console.error('Error loading gist:', error);
        return null;
    }
}

// Clipboard functions
const clipboard = {
    async copy(text) {
        if (navigator.clipboard && window.isSecureContext) {
            return navigator.clipboard.writeText(text);
        }
        
        const textarea = document.createElement('textarea');
        textarea.value = text;
        textarea.style.position = 'fixed';
        textarea.style.opacity = '0';
        document.body.appendChild(textarea);
        textarea.select();
        
        try {
            document.execCommand('copy');
            return Promise.resolve();
        } catch (err) {
            console.error('Failed to copy URL:', err);
            return Promise.reject(err);
        } finally {
            document.body.removeChild(textarea);
        }
    }
};

// Share functionality
async function shareCode() {
    const content = editor.getValue();
    try {
        // Track share button click
        gtag('event', 'click', {
            'event_category': 'Share',
            'event_label': 'Quick Share Button - markdown.html',
            'value': 1
        });
        
        const encoded = btoa(unescape(encodeURIComponent(content)));
        const baseUrl = window.location.href.split('#')[0];  // Get full URL path without hash
        const shareUrl = `${baseUrl}#code=${encoded}`;
        
        await clipboard.copy(shareUrl);
        const button = document.getElementById('compressedButton');
        button.textContent = 'Copied!';
        
        setTimeout(() => {
            button.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" fill="currentColor"/></svg>Copy compressed URL';
        }, 2000);
    } catch (error) {
        console.error('Error sharing code:', error);
        alert('Could not automatically copy the URL. Here it is to copy manually:\n\n' + shareUrl);
    }
}

// Debounce function
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

// Preview update function
const debouncedPreviewUpdate = debounce(() => {
    const newContent = editor.getValue();
    if (previousContent === newContent) return;
    
    previousContent = newContent;
    const preview = document.getElementById('preview');
    
    // Configure marked options
    marked.setOptions({
        highlight: function(code, lang) {
            if (lang && hljs.getLanguage(lang)) {
                return hljs.highlight(code, { language: lang }).value;
            }
            return hljs.highlightAuto(code).value;
        },
        breaks: true,
        gfm: true
    });
    
    // Convert markdown to HTML and update preview
    preview.innerHTML = marked.parse(newContent);
    
    // Highlight all code blocks
    preview.querySelectorAll('pre code').forEach((block) => {
        hljs.highlightBlock(block);
    });
}, 150);

// Move window.onload inside module
window.addEventListener('load', function() {
    Split(['#left-panel', '#right-panel'], {
        sizes: [50, 50],
        minSize: [200, 200],
        gutterSize: 10,
        dragInterval: 1,
        snapOffset: 0,
        elementStyle: (dimension, size, gutterSize) => ({
            'flex-basis': `calc(${size}% - ${gutterSize}px)`,
        }),
        gutterStyle: (dimension, gutterSize) => ({
            'flex-basis': `${gutterSize}px`,
        }),
        onDrag: () => editor.refresh()
    });
    init();
});
</script>
</head>
<body style="margin: 0; padding: 0; overflow: hidden;">
    <button id="shareButton" onclick="modal.show(); gtag('event', 'click', {'event_category': 'Share', 'event_label': 'Share Icon Button - markdown.html', 'value': 1});" title="Share code">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z" fill="currentColor"/>
        </svg>
    </button>

    <!-- Share Modal -->
    <div id="shareModal" class="modal" onclick="if(event.target === this) modal.hide()">
        <div class="modal-content">
            <button class="modal-close" onclick="modal.hide()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" fill="currentColor"/>
                </svg>
            </button>
            <h2 style="margin-top: 0;">Share Your Markdown</h2>
            
            <div class="share-option">
                <h3>Option 1: Share via GitHub Gist (Recommended)</h3>
                <p>1. Create a new Gist at <a href="https://gist.github.com" target="_blank" style="color: #7cb7ff;">gist.github.com</a><br>
                   2. Copy your markdown and paste it there<br>
                   3. After saving, click "Raw" button<br>
                   4. Add your raw Gist URL to: <code style="background: #404040; padding: 2px 6px; border-radius: 4px;">realtimehtml.com/markdown#</code></p>
            </div>

            <div class="share-option">
                <h3>Option 2: Quick Share (URL Compressed)</h3>
                <p>Get an instantly shareable link with your markdown compressed into the URL.<br>
                   Note: This might not work for very large files (more than 1200 lines). </p>
                <button id="compressedButton" class="share-button" onclick="shareCode()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" fill="currentColor"/>
                    </svg>
                    Copy compressed URL
                </button>
            </div>

            <div class="share-option">
                <h3>Option 3: Embed Code</h3>
                <p>Add this HTML code to embed the markdown editor in your website. You can test the embed code in this editor itself:</p>
                <div class="code-container" style="background: #404040; padding: 10px; border-radius: 4px; margin-bottom: 10px;">
                    <code id="embedCode" style="color: #fff; display: block; white-space: pre-wrap; word-wrap: break-word; font-family: monospace; max-height: 200px; overflow-y: auto; overflow-x: auto; scrollbar-width: thin; scrollbar-color: #666 #404040; padding-right: 10px;">
                        <style>
                            #embedCode::-webkit-scrollbar { width: 8px; height: 8px; }
                            #embedCode::-webkit-scrollbar-track { background: #404040; border-radius: 4px; }
                            #embedCode::-webkit-scrollbar-thumb { background: #666; border-radius: 4px; border: 2px solid #404040; }
                            #embedCode::-webkit-scrollbar-thumb:hover { background: #777; }
                        </style>
                    </code>
                </div>
                <button id="embedButton" class="share-button" onclick="copyEmbedCode(); gtag('event', 'click', {'event_category': 'Share', 'event_label': 'Embed Code Button - markdown.html', 'value': 1});">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" fill="currentColor"/>
                    </svg>
                    Copy embed code
                </button>
            </div>
        </div>
    </div>

    <div class="split">
        <div class="split-panel" id="left-panel">
            <div id="editor"></div>
        </div>
        <div class="gutter"></div>
        <div class="split-panel" id="right-panel">
            <div id="preview"></div>
        </div>
    </div>
</body>
</html>
