<!DOCTYPE html>
<html lang="en">
<head>
<title>Markdown Editor - Live Preview with Real-time Editing</title>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Free online Markdown editor with instant live preview. Write and preview Markdown in real-time. Perfect for writing documentation, README files, and blog posts.">
<meta name="author" content="realtimehtml.com">
<meta name="keywords" content="Markdown editor, live preview, real-time editor, code editor, web development, documentation, README, blog writing, online editor, free editor, GitHub Flavored Markdown, GFM">
<meta name="robots" content="index, follow">
<meta name="googlebot" content="index, follow">
<meta name="google" content="nositelinkssearchbox">
<meta name="google" content="notranslate">

<!-- Canonical URL -->
<link rel="canonical" href="https://realtimehtml.com/markdown">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://realtimehtml.com/markdown">
<meta property="og:title" content="Markdown Editor - Live Preview with Real-time Editing">
<meta property="og:description" content="Free online Markdown editor with instant live preview. Write and preview Markdown in real-time. Perfect for writing documentation, README files, and blog posts.">
<meta property="og:image" content="https://realtimehtml.com/preview.svg">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:image:alt" content="Real-time Markdown Editor interface showing editor and live preview">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://realtimehtml.com/markdown">
<meta property="twitter:title" content="Markdown Editor - Live Preview with Real-time Editing">
<meta property="twitter:description" content="Free online Markdown editor with instant live preview. Write and preview Markdown in real-time. Perfect for writing documentation, README files, and blog posts.">
<meta property="twitter:image" content="https://realtimehtml.com/preview.svg">
<meta property="twitter:image:alt" content="Real-time Markdown Editor interface showing editor and live preview">

<!-- Favicon -->
<link rel="icon" href="./vector.png">
<link rel="apple-touch-icon" href="./vector.png">

<!-- Preload critical resources -->
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css" as="style">
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js" as="script">

<!-- Add CodeMirror CSS and JavaScript -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/dracula.min.css">
<link rel="stylesheet" href="./scrollbar.css">
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/markdown/markdown.min.js"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/xml/xml.min.js"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/css/css.min.js"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/htmlmixed/htmlmixed.min.js"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/mode/overlay.min.js"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/gfm/gfm.min.js"></script>

<!-- Add Storage Utils -->
<script type="module" src="./utils.js"></script>

<!-- Add Stripe -->
<script src="https://js.stripe.com/v3/"></script>

<!-- Add Payment Integration -->
<script type="module" src="./payment.js"></script>

<!-- Add Split.js -->
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/split.js/1.6.5/split.min.js"></script>

<!-- Add Marked.js for Markdown parsing -->
<script defer src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

<!-- Add highlight.js for syntax highlighting -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github-dark.min.css">
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>

<!-- Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "Markdown Editor",
  "url": "https://realtimehtml.com/markdown",
  "description": "Free online Markdown editor with instant live preview. Write and preview Markdown in real-time. Perfect for writing documentation, README files, and blog posts.",
  "applicationCategory": "DeveloperApplication",
  "operatingSystem": "Any",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "featureList": [
    "Real-time Markdown preview",
    "GitHub Flavored Markdown support",
    "Syntax highlighting",
    "Split view editor",
    "Mobile responsive",
    "Code sharing",
    "Dark theme support",
    "Auto-save"
  ],
  "screenshot": "https://realtimehtml.com/markdown-preview.png",
  "softwareVersion": "3.0",
  "author": {
    "@type": "Organization",
    "name": "realtimehtml.com"
  },
  "keywords": "Markdown editor, live preview, documentation, README, blog writing, web development"
}
</script>

<style>
/* Base styles */
:root {
    --system-fonts: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
    --modal-bg: #2d2d2d;
    --modal-hover: #3d3d3d;
    --transition-default: all 0.2s ease;
}

/* Editor styles */
.CodeMirror {
    height: 100vh;
    font-size: 14px;
    font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
}

/* Split panel styles */
.split {
    display: flex;
    width: 100vw;
    height: 100vh;
}

.split-panel {
    overflow: hidden;
    height: 100vh;
}

#editor {
    min-width: 0;
}

/* Preview styles */
#preview {
    height: 100%;
    overflow-y: auto;
    padding: 20px;
    box-sizing: border-box;
    font-family: var(--system-fonts);
    line-height: 1.6;
    color: #24292e;
    background: #ffffff;
}

#preview h1, #preview h2, #preview h3, #preview h4, #preview h5, #preview h6 {
    margin-top: 24px;
    margin-bottom: 16px;
    font-weight: 600;
    line-height: 1.25;
    color: #24292e;
}

#preview h1 { font-size: 2em; }
#preview h2 { font-size: 1.5em; }
#preview h3 { font-size: 1.25em; }
#preview h4 { font-size: 1em; }
#preview h5 { font-size: 0.875em; }
#preview h6 { font-size: 0.85em; }

#preview p, #preview ul, #preview ol {
    margin-bottom: 16px;
}

#preview code {
    padding: 0.2em 0.4em;
    margin: 0;
    font-size: 85%;
    background-color: rgba(27, 31, 35, 0.05);
    border-radius: 3px;
    font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;
}

#preview pre code {
    padding: 16px;
    display: block;
    overflow-x: auto;
    line-height: 1.45;
    background-color: #f6f8fa;
    border-radius: 6px;
}

#preview a {
    color: #0366d6;
    text-decoration: none;
}

#preview a:hover {
    text-decoration: underline;
}

#preview blockquote {
    padding: 0 1em;
    color: #6a737d;
    border-left: 0.25em solid #dfe2e5;
    margin: 0 0 16px 0;
}

#preview img {
    max-width: 100%;
    height: auto;
}

#preview table {
    border-collapse: collapse;
    width: 100%;
    margin-bottom: 16px;
}

#preview table th,
#preview table td {
    padding: 6px 13px;
    border: 1px solid #dfe2e5;
}

#preview table tr {
    background-color: #ffffff;
    border-top: 1px solid #dfe2e5;
}

#preview table tr:nth-child(2n) {
    background-color: #f6f8fa;
}

/* Gutter styles */
.gutter {
    background-color: #333;
    background-repeat: no-repeat;
    background-position: 50%;
}

.gutter:hover {
    background-color: #444;
}

.gutter.gutter-horizontal {
    cursor: col-resize;
    width: 10px;
}

/* Share button styles */
#shareButton {
    position: fixed;
    bottom: 70px;
    left: 0;
    transform: translateX(0);
    z-index: 10000;
    width: 36px;
    height: 36px;
    background-color: var(--modal-bg);
    color: white;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.2s ease, box-shadow 0.2s ease;
    will-change: transform;
}

#shareButton:hover {
    background-color: var(--modal-hover);
    box-shadow: 0 3px 7px rgba(0,0,0,0.3);
}

#shareButton:active {
    transform: scale(0.95);
}

/* Modal styles */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 10001;
    opacity: 0;
    transition: var(--transition-default);
    font-family: var(--system-fonts);
}

.modal.show {
    display: flex;
    opacity: 1;
}

.modal-content {
    position: relative;
    background: var(--modal-bg);
    margin: auto;
    padding: 20px;
    border-radius: 8px;
    width: 90%;
    max-width: 600px;
    color: #fff;
    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
}

.modal-content h2 {
    font-family: var(--system-fonts);
    font-weight: 600;
    font-size: 20px;
    letter-spacing: -0.01em;
    margin-top: 0;
}

.modal-close {
    position: absolute;
    top: 15px;
    right: 15px;
    background: none;
    border: none;
    color: #999;
    cursor: pointer;
    padding: 5px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: var(--transition-default);
}

.modal-close:hover {
    background: rgba(255,255,255,0.1);
    color: #fff;
}

/* Share options */
.share-option {
    background: #363636;
    padding: 15px;
    margin: 10px 0;
    border-radius: 6px;
    transition: var(--transition-default);
}

.share-option:hover {
    background: #404040;
}

.share-option h3 {
    margin: 0 0 8px 0;
    font-size: 16px;
    color: #fff;
    font-weight: 500;
}

.share-option p {
    margin: 0 0 12px 0;
    color: #bbb;
    font-size: 14px;
    line-height: 1.5;
    font-weight: 400;
}

.share-button {
    font-family: var(--system-fonts);
    font-weight: 500;
    background: #4a4a4a;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    transition: var(--transition-default);
}

.share-button:hover {
    background: #555;
}

/* Add proper CSS for info button */
#infoButton {
    position: fixed;
    bottom: 20px;
    left: 0;
    transform: translateX(0);
    z-index: 10000;
    width: 36px;
    height: 36px;
    background-color: var(--modal-bg);
    color: white;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.2s ease, box-shadow 0.2s ease;
    will-change: transform;
}

#infoButton:hover {
    background-color: var(--modal-hover);
    box-shadow: 0 3px 7px rgba(0,0,0,0.3);
}

#infoButton:active {
    transform: scale(0.95);
}
</style>

<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-7E9MWZLQHL');
</script>

<script type="module">
import { storage, STORAGE_KEYS, embed, modal } from './utils.js';

// Remove the redundant modal object and functions


const defaultStuff = `# Welcome to the Markdown Editor! ✨

## Features

- **Real-time Preview**: See your changes instantly
- **Syntax Highlighting**: For code blocks
- **GitHub Flavored Markdown**: Supporting tables, task lists, and more
- **Easy Sharing**: Share your markdown content with others

## Example Code Block

\`\`\`javascript
function greet(name) {
    console.log(\`Hello, \${name}!\`);
}
greet('World');
\`\`\`

## Task List

- [x] Create markdown editor
- [x] Add real-time preview
- [ ] Write documentation
- [ ] Share with friends

## Table Example

| Feature | Status |
|---------|--------|
| Editor | ✅ |
| Preview | ✅ |
| Sharing | ✅ |
| Dark Mode | ✅ |

> Start editing to see the magic happen! ✨
`;

let editor;
let previousContent = '';

// Initialize editor
async function init() {
    let initialContent = defaultStuff;
    const hash = window.location.hash;

    // Try loading from URL first
    if (hash && hash.startsWith('#')) {
        if (hash.startsWith('#code=')) {
            initialContent = modal.loadInitialContent(defaultStuff, STORAGE_KEYS.MARKDOWN_EDITOR);
        } else {
            // Handle Gist URLs
            const gistUrl = hash.substring(1);
            const content = await loadGistContent(gistUrl);
            if (content) initialContent = content;
        }
    } else {
        // Only load from storage if no URL hash is present
        initialContent = storage.load(STORAGE_KEYS.MARKDOWN_EDITOR, defaultStuff);
    }

    editor = CodeMirror(document.querySelector('#editor'), {
        value: initialContent,
        mode: 'markdown',
        theme: 'dracula',
        lineNumbers: true,
        lineWrapping: true,
        viewportMargin: Infinity,
        tabSize: 2,
        indentUnit: 2,
        autofocus: true,
        matchBrackets: true,
        autoCloseBrackets: true
    });

    // Initialize modal with editor instance
    modal.init(editor);
    
    // Add auto-save functionality
    editor.on('change', (cm) => {
        debouncedPreviewUpdate();
        // Save to localStorage
        const content = cm.getValue();
        storage.save(STORAGE_KEYS.MARKDOWN_EDITOR, content, defaultStuff);
    });
    
    editor.focus();
    editor.execCommand('selectAll');
    debouncedPreviewUpdate();
}

// Gist loading function
async function loadGistContent(url) {
    try {
        // Convert github.com URLs to raw content URLs
        if (url.includes('github.com/gist/') || url.includes('gist.github.com/')) {
            // If it's not already a raw URL, convert it
            if (!url.includes('raw.githubusercontent.com') && !url.includes('/raw/')) {
                // Handle both full and shortened URLs
                url = url.replace('gist.github.com/', 'gist.githubusercontent.com/')
                         .replace('github.com/gist/', 'gist.githubusercontent.com/')
                         .replace('/blob/', '/raw/');
                
                // If URL doesn't end with /raw, add it
                if (!url.endsWith('/raw')) {
                    url = url + '/raw';
                }
            }
        }

        const response = await fetch(url);
        if (!response.ok) throw new Error('Failed to fetch Gist');
        return await response.text();
    } catch (error) {
        console.error('Error loading gist:', error);
        return null;
    }
}

// Debounce function - keep this!
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

// Preview update function
const debouncedPreviewUpdate = debounce(() => {
    const newContent = editor.getValue();
    if (previousContent === newContent) return;
    
    previousContent = newContent;
    const preview = document.getElementById('preview');
    
    // Configure marked options
    marked.setOptions({
        highlight: function(code, lang) {
            if (lang && hljs.getLanguage(lang)) {
                return hljs.highlight(code, { language: lang }).value;
            }
            return hljs.highlightAuto(code).value;
        },
        breaks: true,
        gfm: true
    });
    
    // Convert markdown to HTML and update preview
    preview.innerHTML = marked.parse(newContent);
    
    // Highlight all code blocks
    preview.querySelectorAll('pre code').forEach((block) => {
        hljs.highlightBlock(block);
    });
}, 150);

// Move window.onload inside module
window.addEventListener('load', function() {
    const shareButton = document.getElementById('shareButton');
    const infoButton = document.getElementById('infoButton');
    const buttonWidth = 36; // Width of the buttons
    
    function updateButtonPositions() {
        const gutter = document.querySelector('.gutter');
        if (gutter) {
            const gutterRect = gutter.getBoundingClientRect();
            const gutterCenter = gutterRect.left + (gutterRect.width / 2);
            const buttonOffset = gutterCenter - (buttonWidth / 2) + 5;
            shareButton.style.transform = `translateX(${buttonOffset}px)`;
            infoButton.style.transform = `translateX(${buttonOffset}px)`;
        }
    }
    
    // Initial positioning
    const initialOffset = (window.innerWidth / 2) - (buttonWidth / 2);
    shareButton.style.transform = `translateX(${initialOffset}px)`;
    infoButton.style.transform = `translateX(${initialOffset}px)`;
    
    Split(['#left-panel', '#right-panel'], {
        sizes: [50, 50],
        minSize: [200, 200],
        gutterSize: 10,
        dragInterval: 1,
        snapOffset: 0,
        elementStyle: (dimension, size, gutterSize) => ({
            'flex-basis': `calc(${size}% - ${gutterSize}px)`,
        }),
        gutterStyle: (dimension, gutterSize) => ({
            'flex-basis': `${gutterSize}px`,
        }),
        onDrag: () => {
            editor.refresh();
            updateButtonPositions();
        }
    });
    
    // Handle window resize
    window.addEventListener('resize', updateButtonPositions);
    
    init();
});
</script>

<script>
function trackShareEvent() {
    try {
        gtag('event', 'custom_share_markdown', {
            'event_category': 'engagement',
            'event_label': 'Custom - Share Button Click - markdown.html'
        });
    } catch (error) {
        console.error('Error tracking share event:', error);
    }
}

function trackInfoEvent() {
    console.log('Info event tracked');
    try {
        gtag('event', 'custom_info_markdown', {
            'event_category': 'engagement',
            'event_label': 'Custom - Info Modal Button - markdown.html'
        });
    } catch (error) {
        console.error('Error tracking info event:', error);
    }
}
</script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7E9MWZLQHL"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-7E9MWZLQHL');
</script>


</head>
<body style="margin: 0; padding: 0; overflow: hidden;">
    <button id="shareButton" onclick="analytics.trackShare(); modal.show();" title="Share code">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z" fill="currentColor"/>
        </svg>
    </button>

    <!-- Add info button -->
    <button id="infoButton" onclick="analytics.trackInfo(); modal.showInfo();" title="Available Editors">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z" fill="currentColor"/>
        </svg>
    </button>

    <div class="split">
        <div class="split-panel" id="left-panel">
            <div id="editor"></div>
        </div>
        <div class="gutter"></div>
        <div class="split-panel" id="right-panel">
            <div id="preview"></div>
        </div>
    </div>
</body>
</html>
